/* ===========================
   LAYERS
=========================== */
@layer base, components, utilities;

/* ---------------------------
   BASE
--------------------------- */
@layer base {
  :root {
    /* Retro 2000 (tema base por defecto) */
    --bg: #181818;
    --text: #E0E0E0;
    --text-secondary: #C0C0C0;
    --header-bg: #202020;
    --header-text: #FFFFFF;
    --link: #00BFFF;
    --accent: #FF00FF;
    --accent-hover: #FF66FF;
    --card-bg: #222222;
    --card-border: #555555;
    --muted: #A0A0A0;
    --button-bg: #2C2C2C;
    --button-text: #FFFFFF;
    --button-hover-text: #000000;
  }

  body {
    margin: 0;
    font-family: 'Verdana', sans-serif;
    background-color: var(--bg);
    color: var(--text);
    line-height: 1.6;
    opacity: 1;
    transition: opacity 0.4s ease, background-color 0.3s ease, color 0.3s ease;
    container-type: inline-size; /* El body es un contenedor principal */
  }

  body.visible { opacity: 1; }
  body.page-transition { opacity: 0; }

  header, footer {
    background: var(--header-bg);
    color: var(--header-text);
    text-align: center;
    padding: 1rem;
    border-bottom: 3px solid var(--accent);
    box-shadow: 0 4px 10px rgba(0,0,0,0.4);
    container-type: inline-size; /* También contenedor */
  }

  nav a {
    color: var(--link);
    margin: 0 10px;
    text-decoration: none;
    font-weight: bold;
    transition: color 0.3s ease;
  }

  nav a:hover {
    animation: neon-glow 0.8s ease-in-out infinite alternate;
  }

  @keyframes neon-glow {
    0%, 100% { text-shadow: 0 0 5px var(--accent), 0 0 10px var(--accent-hover); }
    50% { text-shadow: 0 0 10px var(--accent-hover), 0 0 20px var(--accent-hover); }
  }
}

/* ---------------------------
   COMPONENTS
--------------------------- */
@layer components {
  main {
    max-width: 100%;
    margin: 2rem auto;
    padding: 0 1rem;
    container-type: inline-size; /* Contenedor para adaptar hijos */
  }

  .cards-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5rem;
    container-type: inline-size; /* Cada sección puede responder a su propio ancho */
  }

  /* Tarjeta */
  .card {
    display: block;
    background: var(--card-bg);
    border: 2px solid var(--card-border);
    border-radius: 8px;
    overflow: hidden;
    color: inherit;
    text-decoration: none;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    transition: transform 0.2s ease, box-shadow 0.3s ease, border-color 0.3s ease;
    container-type: inline-size;
  }

  .card img {
    width: 100%;
    display: block;
  }

  .card-content {
    padding: 1rem;
  }

  .card:hover {
    transform: scale(1.03);
    box-shadow: 0 8px 20px rgba(0,0,0,0.5);
    border-color: var(--accent-hover);
  }

  .card .date {
    font-size: 0.8em;
    color: var(--muted);
  }

  .excerpt {
    margin-top: 0.5rem;
    color: var(--text-secondary);
  }

  /* Botones */
  .theme-switcher button {
    margin: 0 5px;
    padding: 0.5rem 1rem;
    border: 2px solid var(--accent);
    background: var(--button-bg);
    color: var(--button-text);
    cursor: pointer;
    border-radius: 6px;
    transition: all 0.3s ease;
  }

  .theme-switcher button:hover {
    background: var(--accent-hover);
    color: var(--button-hover-text);
    box-shadow: 0 0 10px var(--accent-hover);
  }
}

/* ---------------------------
   UTILITIES (Container queries)
--------------------------- */
@layer utilities {
  /* Ocultar elementos rápidamente */
  .hidden { display: none; }

  /* Container queries: ajustes internos por componente */

  /* Nav se adapta: apila enlaces si es estrecho */
  @container header (max-width: 400px) {
    nav a {
      display: block;
      margin: 5px 0;
    }
  }

  /* Cards: texto compacto en tarjetas estrechas */
  @container (max-width: 300px) {
    .card-content {
      padding: 0.5rem;
    }
    .excerpt {
      display: none;
    }
  }

  /* Layout de posts: si main es estrecho, una columna */
  @container main (max-width: 600px) {
    .cards-container {
      grid-template-columns: 1fr;
    }
  }
}

/* ===========================
   TEMAS EXTRA
=========================== */
.theme-synthwave {
  --bg: #1a103d;
  --text: #f5e1ff;
  --text-secondary: #d0b3f2;
  --header-bg: linear-gradient(90deg, #3a0ca3, #7209b7);
  --header-text: #ffffff;
  --link: #ff6ec7;
  --accent: #ff00e6;
  --accent-hover: #ff5cf0;
  --card-bg: #2c145a;
  --card-border: #6d23f7;
  --muted: #9c7dd7;
  --button-bg: #47126b;
  --button-text: #f5e1ff;
  --button-hover-text: #000;
}

.theme-hacker {
  --bg: #0b0f0c;
  --text: #39ff14;
  --text-secondary: #1aff66;
  --header-bg: linear-gradient(90deg, #001a00, #003300);
  --header-text: #39ff14;
  --link: #00ffcc;
  --accent: #00ff00;
  --accent-hover: #66ff66;
  --card-bg: #0f1f0f;
  --card-border: #33cc33;
  --muted: #66cc66;
  --button-bg: #003300;
  --button-text: #39ff14;
  --button-hover-text: #000;
}
